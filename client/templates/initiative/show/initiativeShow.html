<template name='initiativeShow'>
 <div class="initiative-show">
  {{#with initiative}}
  <div class="col s12 m6 l4">
    <div class="initiative-show--content">
      <a href="#" class="initiative-show--user-image">
        <img src="{{getInitiativeAuthorImage}}" alt="" class="circle responsive-img user-photo">
        <span class="initiative-show--content__username">
          {{currentUser.profile.name}}
        </span>
      </a>
      <div class="initiative-show--content__description">
        <h3><i class="material-icons small">beenhere</i> The Story</h3>
        <p >
          {{description}}
          <!-- TODO: This will become a more elaborate section soon -->
        </p>
      </div>
      <div class="initiative-show--content__comments">
        {{#if currentUser}}
        {{> initiativeCommenter}}
        {{else}}
        <span class="not-logged-in">You must be logged in to comment.</span>
        {{/if}}
        {{> initiativeComments}}
      </div>
    </div>
  </div>


  {{/with}}
</div>
</template>

<template name="initiativeCommenter">
  <div class="commenter-container row">
    <form class="col s12 commenter-form">
      <div class="input-field col s12">
        <input id="comment" type="text" name="comment" required>
        <label for="comment">Say something about {{title}}</label>
        <button class="btn waves-effect waves-light" type="submit">Comment</button>
      </div>
    </form>
  </div>
</template>

<template name="initiativeComments">
  <div class="comments-container">
    <ul class="collection">
      {{#each comments}}
      <li class="collection-item avatar">
        <img src="{{getCommentAuthorImage}}" alt="avatar" class="circle responsive-img user-photo">
        <p class="comment-message left">{{message}}</p>
        <span class="comment-time right">{{getPrettyDate createdAt}}</span>
      </li>
      {{/each}}
    </ul>
  </div>
</template>